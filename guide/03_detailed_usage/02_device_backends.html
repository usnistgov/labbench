<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Device Backends &#8212; labbench</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
    <link rel="stylesheet" type="text/css" href="../../_static/pyramid.css?v=0613869e" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <script src="../../_static/documentation_options.js?v=5273b9ac"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="search" title="Search" href="../../search.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>
<header class="nist-header">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>NIST Pages Template</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="labbench">
  <link rel="canonical" href="../../">
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Google Analytics -->
  <!--<script type="text/javascript" id="_fed_an_js_tag" src="http://www.nist.gov/js/federated-analytics.all.min.js?agency=NIST&subagency=mml&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script> -->
  <!-- DAP Analytics -->
  <script type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=DOC&subagefncy=NIST&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../..//_static/NISTStyle.css">
  <link rel="stylesheet" href="../..//_static/NISTPages.css">

  <h1>
    <a class="nist-logo" target="_blank" href="http://www.nist.gov/" title="Go to nist.gov">National Institute of Standards and Technology</a>
  </h1>
  <div class="nist-links">
    <a class="nist-links-button" target="_blank" href="http://www.nist.gov">NIST Website</a>
    <a class="nist-links-button mobile-hide" target="_blank" href="http://www.nist.gov/public_affairs/nandyou.cfm">About NIST</a>
    <a class="nist-links-button mobile-hide" target="_blank" href="https://github.com/usnistgov">usnistgov on GitHub</a>
  </div>
  
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</header>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">labbench</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Device Backends</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="device-backends">
<h1>Device Backends<a class="headerlink" href="#device-backends" title="Link to this heading">¶</a></h1>
<p>A series of short working examples here illustrate the use of labbench <code class="docutils literal notranslate"><span class="pre">Device</span></code> classes for experiment automation. The python programming interface is in the module of the same name, but it is convenient to import it as <code class="docutils literal notranslate"><span class="pre">lb</span></code> for shorthand.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">labbench</span> <span class="k">as</span> <span class="nn">lb</span>
<span class="n">lb</span><span class="o">.</span><span class="n">show_messages</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Laboratory automation wrappers are implemented as classes derived from <code class="docutils literal notranslate"><span class="pre">lb.Device</span></code>. All of them share common basic types features designed to make their usage discoverable and convenient. The goal here is to show how to navigate these objects to get started quickly automating lab tasks.</p>
<p>Wrappers for specific instruments are not included with <code class="docutils literal notranslate"><span class="pre">labbench</span></code>, only low-level python plumbing and utility functions to streamline lab automation. Specific implementation is left for other libraries.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Device</span></code> class and subclasses represent in a sense only a definition with instructions for automating a specified type of lab tool. To bring these to life and control objects in the lab, the most general steps are to</p>
<ol class="arabic simple">
<li><p>construct an object from the class,</p></li>
<li><p>open a connection, and then</p></li>
<li><p>use the object’s attributes to perform automation tasks as needed.</p></li>
</ol>
<p>Let’s start with a simple automation demo for a simple 2 instrument experiment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">labbench</span> <span class="k">as</span> <span class="nn">lb</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sim_visa</span> <span class="kn">import</span> <span class="n">PowerSupply</span><span class="p">,</span> <span class="n">SpectrumAnalyzer</span>

<span class="c1"># VISA Devices take a standard address string to create a resource</span>
<span class="n">spectrum_analyzer</span> <span class="o">=</span> <span class="n">SpectrumAnalyzer</span><span class="p">(</span><span class="s1">&#39;GPIB::15::INSTR&#39;</span><span class="p">)</span>
<span class="n">supply</span> <span class="o">=</span> <span class="n">PowerSupply</span><span class="p">(</span><span class="s1">&#39;USB::0x1111::0x2222::0x2468::INSTR&#39;</span><span class="p">)</span>

<span class="c1"># show SCPI traffic</span>
<span class="n">lb</span><span class="o">.</span><span class="n">show_messages</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">)</span>

<span class="c1"># `with` blocks open the devices, then closes them afterward</span>
<span class="k">with</span> <span class="n">supply</span><span class="p">,</span> <span class="n">spectrum_analyzer</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">supply</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="n">supply</span><span class="o">.</span><span class="n">_rm</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">supply</span><span class="o">.</span><span class="n">read_termination</span><span class="p">))</span>
    <span class="n">supply</span><span class="o">.</span><span class="n">voltage</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">supply</span><span class="o">.</span><span class="n">output_enabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">trace_dB</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">spectrum_analyzer</span><span class="o">.</span><span class="n">fetch_trace</span><span class="p">())</span>
<span class="n">trace_dB</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">labbench</span> <span class="k">as</span> <span class="nn">lb</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="kn">from</span> <span class="nn">sim_visa</span> <span class="kn">import</span> <span class="n">PowerSupply</span><span class="p">,</span> <span class="n">SpectrumAnalyzer</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># VISA Devices take a standard address string to create a resource</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">spectrum_analyzer</span> <span class="o">=</span> <span class="n">SpectrumAnalyzer</span><span class="p">(</span><span class="s1">&#39;GPIB::15::INSTR&#39;</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;sim_visa&#39;
</pre></div>
</div>
</div>
</div>
<p>These instruments are emulated - under the hood they are <a class="reference external" href="http://pyvisa-sim.readthedocs.io/">pyvisa-sim</a> instruments, configured in [sim_visa.yaml], which act as simple value stores for a few fake SCPI commands and sources of “canned” arrays of data. The demo labbench Device classes that control them are implemented in [sim_visa.py] (subclassed from <code class="docutils literal notranslate"><span class="pre">lb.Device</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">lb.VISADevice</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">lb.SimulatedVISADevice</span></code>).</p>
</section>
<section id="workflow">
<h2>Workflow<a class="headerlink" href="#workflow" title="Link to this heading">¶</a></h2>
<section id="constructing-objects">
<h3>Constructing objects<a class="headerlink" href="#constructing-objects" title="Link to this heading">¶</a></h3>
<p>These Device classes (like other VISA instruments) need a VISA address in order to point to a specific instrument. To discover information about this and other available initialization parameters, use python help() or the ‘?’ magic in ipython or jupyter:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>SpectrumAnalyzer<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
<p>Other options are also available here, such as the transport settings <code class="docutils literal notranslate"><span class="pre">read_termination</span></code> and <code class="docutils literal notranslate"><span class="pre">read_termination</span></code>, or the number of traces to acquire in calls to <code class="docutils literal notranslate"><span class="pre">fetch_trace</span></code>.</p>
<p>These can also be set or changed after object construction by setting the value attributes, for example <code class="docutils literal notranslate"><span class="pre">spectrum_analyzer.resource</span> <span class="pre">=</span> <span class="pre">'GPIB::15::INSTR'</span></code> or <code class="docutils literal notranslate"><span class="pre">supply.resource</span> <span class="pre">=</span> <span class="pre">'USB::0x1111::0x2222::0x2468::INSTR'</span></code>. The complete list of these parameters is shown under “Value Attributes”, which also lists read-only values that can’t be changed and are not constructor arguments.</p>
</section>
<section id="opening-device-connections">
<h3>Opening device connections<a class="headerlink" href="#opening-device-connections" title="Link to this heading">¶</a></h3>
<p>In automation scripts, it is good practice to use a context block (that <code class="docutils literal notranslate"><span class="pre">with</span></code> statement) to open connections. This ensures all of the devices open and close together, even when exceptions are raised.</p>
<p>For interactive use on the python/ipython/jupyter prompt, this is less convenient. For this purpose, device objects also expose explicit <code class="docutils literal notranslate"><span class="pre">open</span></code> and <code class="docutils literal notranslate"><span class="pre">close</span></code> methods. As an example, a simple check for instrument response to automation could look like this,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">supply</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">supply</span><span class="o">.</span><span class="n">output_enabled</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (...look at the instrument to verify output is disabled)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">supply</span><span class="o">.</span><span class="n">output_enabled</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (...verify instrument output is enabled)</span>
</pre></div>
</div>
<p>This type of exploration is a good way to learn the capabilities of a device interactively.</p>
</section>
<section id="automating-with-open-devices">
<h3>Automating with open devices<a class="headerlink" href="#automating-with-open-devices" title="Link to this heading">¶</a></h3>
<p>Python’s introspection tools give more opportunities to discover the API exposed by a device object. This is important because the methods and other attributes vary from one type of Device class to another. The below uses <code class="docutils literal notranslate"><span class="pre">dir</span></code> to show the list of all <em>public</em> attributes (those that don’t start with <code class="docutils literal notranslate"><span class="pre">'_'</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># filter by name</span>
<span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">name</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">SpectrumAnalyzer</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;public attributes of SpectrumAnalyzer: </span><span class="si">{</span><span class="n">attrs</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># discover the &#39;query&#39; method common to VISA all devices</span>
SpectrumAnalyzer.query<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
<p>Trait attributes that cast to python types with validation are definitions in classes, but become interactive values in device objects:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;class: SpectrumAnalyzer.sweeps == </span><span class="si">{</span><span class="n">SpectrumAnalyzer</span><span class="o">.</span><span class="n">sweeps</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;object: spectrum_analyzer.sweeps == </span><span class="si">{</span><span class="n">signal_analyzer</span><span class="o">.</span><span class="n">sweeps</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">signal_analyzer</span><span class="o">.</span><span class="n">open</span>
<span class="n">SpectrumAnalyzer</span><span class="o">.</span><span class="n">open</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="generalizing-from-the-example">
<h2>Generalizing from the example<a class="headerlink" href="#generalizing-from-the-example" title="Link to this heading">¶</a></h2>
<p>Different subclasses expose different method functions and attribute variables to wrap the underling low-level API. Still, several characteristics are standardized:</p>
<ul class="simple">
<li><p>connection management through <code class="docutils literal notranslate"><span class="pre">with</span></code> block or <code class="docutils literal notranslate"><span class="pre">open</span></code>/<code class="docutils literal notranslate"><span class="pre">close</span></code> methods</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">isopen</span></code> property to indicate connection status</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource</span></code> is accepted by the constructor, and may be changed afterward as a class attribute</p></li>
<li><p>hooks are available for data loggers and UIs to observe automation calls</p></li>
</ul>
<p>Device subclasses for different types of instruments and software differ in</p>
<ul class="simple">
<li><p>the types of resource and configuration information</p></li>
<li><p>the specific resource of the class provided to control the device</p></li>
</ul>
<p>This gets more complicated when handling multiple devices, because connection failures leave a combination of open and closed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">base</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
    <span class="n">visa</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> <span class="c1"># fails because its resource doesn&#39;t exist on the host</span>
    
    <span class="c1"># we don&#39;t get this far after visa.open() raises an exception</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;doing useful automation here&quot;</span><span class="p">)</span>
    <span class="n">visa</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">base</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>    
    <span class="c1"># we&#39;re left with a mixture of connection states</span>
    <span class="k">assert</span> <span class="n">base</span><span class="o">.</span><span class="n">isopen</span><span class="o">==</span><span class="kc">True</span> <span class="ow">and</span> <span class="n">visa</span><span class="o">.</span><span class="n">isopen</span><span class="o">==</span><span class="kc">False</span>

    <span class="c1"># ...so we have to clean up the stray connection manually :(</span>
    <span class="n">base</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Context management is easier and more clear. Everything inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block executes only if all devices open successfully, and ensures cleanup so that all devices are closed afterward.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">base</span><span class="p">,</span> <span class="n">visa</span><span class="p">:</span> <span class="c1"># does both base.open() and visa.open()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;we never get in here, because visa.open() fails!&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># context management ensured a base.close() after visa.open() failed, </span>
    <span class="k">assert</span> <span class="n">base</span><span class="o">.</span><span class="n">isopen</span><span class="o">==</span><span class="kc">False</span> <span class="ow">and</span> <span class="n">visa</span><span class="o">.</span><span class="n">isopen</span><span class="o">==</span><span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<p>data logging, type checking,and numerical bounds validation.</p>
<p>These features are common to all <code class="docutils literal notranslate"><span class="pre">Device</span></code> classes (and derived classes). To get started, provide  by minimum working examples. Examples will use  we’ll look into the more specialized capabilities provided by other <code class="docutils literal notranslate"><span class="pre">Device</span></code> subclasses included <code class="docutils literal notranslate"><span class="pre">labbench</span></code> for often-used backend APIs like serial and VISA.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p>Here are very fake functions that just use <code class="docutils literal notranslate"><span class="pre">time.sleep</span></code> to block. They simulate longer instrument calls (such as triggering or acquisition) that take some time to complete.</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">do_something_3</span></code> takes 3 arguments (and returns them), and that <code class="docutils literal notranslate"><span class="pre">do_something_4</span></code> raises an exception.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">labbench</span> <span class="k">as</span> <span class="nn">lb</span>
</pre></div>
</div>
</div>
</div>
<p>Here is the simplest example, where we call functions <code class="docutils literal notranslate"><span class="pre">do_something_1</span></code> and <code class="docutils literal notranslate"><span class="pre">do_something_2</span></code> that take no arguments and raise no exceptions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">labbench</span> <span class="kn">import</span> <span class="n">concurrently</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">concurrently</span><span class="p">(</span><span class="n">do_something_1</span><span class="p">,</span> <span class="n">do_something_2</span><span class="p">)</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">do_something_1</span><span class="o">.</span><span class="vm">__name__</span>
</pre></div>
</div>
</div>
</div>
<p>We can also pass functions by wrapping the functions in <code class="docutils literal notranslate"><span class="pre">Call()</span></code>, which is a class designed for this purpose:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">labbench</span> <span class="kn">import</span> <span class="n">concurrently</span><span class="p">,</span> <span class="n">Call</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">concurrently</span><span class="p">(</span><span class="n">do_something_1</span><span class="p">,</span> <span class="n">Call</span><span class="p">(</span><span class="n">do_something_3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
</div>
<p>More than one of the functions running concurrently may raise exceptions. Tracebacks print to the screen, and by default <code class="docutils literal notranslate"><span class="pre">ConcurrentException</span></code> is also raised:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">labbench</span> <span class="kn">import</span> <span class="n">concurrently</span><span class="p">,</span> <span class="n">Call</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">concurrently</span><span class="p">(</span><span class="n">do_something_4</span><span class="p">,</span> <span class="n">do_something_5</span><span class="p">)</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">catch</span></code> flag changes concurrent exception handling behavior to return values of functions that did not raise exceptions (instead of raising <code class="docutils literal notranslate"><span class="pre">ConcurrentException</span></code>). The return dictionary only includes keys for functions that did not raise exceptions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">labbench</span> <span class="kn">import</span> <span class="n">concurrently</span><span class="p">,</span> <span class="n">Call</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">concurrently</span><span class="p">(</span><span class="n">do_something_4</span><span class="p">,</span> <span class="n">do_something_1</span><span class="p">,</span> <span class="n">catch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">results</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Device Backends</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#workflow">Workflow</a><ul>
<li><a class="reference internal" href="#constructing-objects">Constructing objects</a></li>
<li><a class="reference internal" href="#opening-device-connections">Opening device connections</a></li>
<li><a class="reference internal" href="#automating-with-open-devices">Automating with open devices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generalizing-from-the-example">Generalizing from the example</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guide/03_detailed_usage/02_device_backends.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">labbench</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Device Backends</a></li> 
      </ul>
    </div>
<hr \>
<section class="footer">
<br><a target="_blank" href="http://www.nist.gov/public_affairs/privacy.cfm#privpolicy">Privacy Policy</a> | <a target="_blank" href="http://www.nist.gov/public_affairs/privacy.cfm#secnot">Security Notice</a> | <a href="http://www.nist.gov/public_affairs/privacy.cfm#accesstate">Accessibility Statement</a>
<br><em>United States government work, not subject to copyright in the United States</em>
</section>

  </body>
</html>