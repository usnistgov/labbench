# see https://github.com/pyvisa/pyvisa-sim/blob/master/pyvisa_sim/default.yaml for more examples
spec: "1.0"
devices:
  power_supply:
    eom:
      ASRL INSTR:
        q: "\r\n"
        r: "\n"
      USB INSTR:
        q: "\n"
        r: "\n"
      TCPIP INSTR:
        q: "\n"
        r: "\n"
      GPIB INSTR:
        q: "\n"
        r: "\n"
    dialogues:
      - q: "*IDN?"
        r: "SIM,POWERSUPPLY,VERSION_1.0"
      - q: "*STB?"
        r: "255"
      - q: "*OPT?"
        r: "OPT1,OPT2,OPT3"
    error:
      status_register:
        - q: "*ESR?"
          command_error: 32
          query_error: 4
    properties:
      voltage:
        default: 1.0
        getter:
          q: ":VOLT:IMM:AMPL?"
          r: "{:+.8E}"
        setter:
          q: ":VOLT:IMM:AMPL {:.3f}"
        specs:
          min: 1
          max: 6
          type: float
      current:
        default: 1.0
        getter:
          q: ":CURR:IMM:AMPL?"
          r: "{:+.8E}"
        setter:
          q: ":CURR:IMM:AMPL {:.3f}"
        specs:
          min: 1
          max: 6
          type: float
      rail:
        default: P6V
        getter:
          q: "INST?"
          r: "{:s}"
        setter:
          q: "INST {:s}"
        specs:
            valid: ["P6V", "P25V", "N25V"]
            type: str
      output_enabled:
        default: 0
        getter:
          q: "OUTP?"
          r: "{:d}"
        setter:
          q: "OUTP {:d}"
        specs:
          valid: [0, 1]
          type: int
      trace:
        default: "5.5,3.4,2.2,1,6"
        getter:
          q: "TRACE?"
          r: "{:s}"
        specs:
          type: str

  spectrum_analyzer:
    eom:
      ASRL INSTR:
        q: "\r\n"
        r: "\n"
      USB INSTR:
        q: "\n"
        r: "\n"
      TCPIP INSTR:
        q: "\n"
        r: "\n"
      GPIB INSTR:
        q: "\n"
        r: "\n"
    dialogues:
      - q: "*IDN?"
        r: "SIM,SPECTRUMANALYZER,VERSION_1.0"
      - q: "*STB?"
        r: "255"
      - q: "*OPT?"
        r: "OPT5,OPT6,OPT7"
    error:
      status_register:
        - q: "*ESR?"
          command_error: 32
          query_error: 4
    properties:
      center_frequency:
        default: 2412e6
        getter:
          q: ":FREQ?"
          r: "{:+.12E}"
        setter:
          q: ":FREQ {:.3f}"
        specs:
          min: 10e6
          max: 18e9
          type: float
      trace:
        default: "9.043751435791591e-10,2.7308799153524167e-09,3.9560633888756235e-10,4.646633965939577e-09,1.4160597398173205e-09,1.4121421282395825e-10,4.411495666808564e-09,3.3594255056988162e-09,9.431979952386708e-10,1.2893665391108373e-09,5.863323727223337e-09,8.34373907987868e-10,1.6853653977387616e-10,5.7544213887116516e-09,1.568579526505318e-09,3.4284487672463267e-09,3.5040842069260683e-09,4.505425419769415e-09,1.5118229153152945e-09,1.0613796264248995e-09,6.674881005276483e-09,9.970334041331317e-09,2.690178035265569e-10,7.365648697410728e-10,1.5432354667957386e-10,1.7800393285234463e-09,6.655142978153543e-10,5.4251027948568245e-09,1.5213169989946446e-09,3.878974133990896e-09,1.5233588833755407e-10,2.076809524254055e-09,3.5593074994476963e-10,4.775102098544253e-09,7.81805046124757e-10,9.582380944081265e-10,1.8526570329274463e-09,3.1257017583683172e-09,1.8778225500321207e-09,5.640998908085486e-09,9.148575350536284e-11,4.344627180277103e-09,5.02832992559186e-10,1.5142088290498776e-10,1.5631240015605405e-10,2.0931066104201805e-09,4.364283501599116e-09,3.7136113979713524e-09,4.764170689175989e-10,2.2846904793401605e-09,4.069877136983289e-09,1.2040743682861392e-09,5.830728430614883e-10,7.974975973809162e-11,3.320613530307418e-09,1.0642240157955381e-09,9.037154472373538e-11,7.39262599089815e-10,2.0593245694364912e-10,1.0509639771163229e-09,6.949205321887066e-10,2.562296561850027e-09,4.385916294426974e-09,1.391590455963617e-09,2.169955798328319e-09,2.4433089422707722e-09,3.4218480922703532e-09,1.2795432450861932e-09,4.3899924741553415e-09,6.138405026062052e-10,5.021188196472904e-09,1.7348810610428866e-09,3.5615142967168324e-10,2.340536681501797e-10,5.099146880638235e-10,1.9029713892650412e-09,5.197842532697907e-10,2.3168020314885717e-09,2.1094353565131333e-10,4.302997166269812e-09,4.183845168991844e-10,9.14986526955119e-11,1.2820082720892824e-09,3.9158556418626134e-11,1.616151347066303e-09,9.034911300723133e-11,8.638599249834173e-09,8.47553196341476e-10,0.01,3.003633612202287e-09,4.3024232575188523e-10,1.9782990318178874e-10,2.69718561676723e-09,8.493943655302121e-10,2.2521013777123634e-09,3.4397272687852003e-10,7.736560911571403e-10,9.189939288143101e-10,2.1537992642189724e-09,4.788189343623787e-09,7.957734405150295e-10,2.865956566254544e-09,5.262477785776892e-10,9.282695022970567e-10,3.175859395006516e-09,2.097861237009398e-09,1.0836420248666422e-09,2.5922376525545064e-09,6.634824238513382e-09,1.209450750228046e-09,2.377606244140132e-10,1.936101253802225e-10,1.453903329907023e-08,5.768927671764285e-10,1.168956999986825e-09,6.774819941308234e-10,4.282888019342152e-09,6.6540990774646e-11,1.0228175529427848e-09,2.309864028811343e-09,3.4349351856773634e-09,1.231973827839946e-09,3.4418781992883976e-09,1.6521828852570237e-09,3.225583142570095e-09,6.062085113625171e-10,5.663458592832875e-10,2.7470492237510327e-09,6.63324886924463e-09,1.2462646570969582e-10,9.130909542995699e-10,8.609078431440967e-10,6.532415273797508e-10,1.365462314776433e-10,2.360047675696207e-09,2.4070409588065774e-09,2.029417842132947e-09,2.4102984418517467e-09,2.394850321620396e-10,3.170466874794809e-09,4.423291530294996e-09,4.436586013315509e-10,1.1676520202227892e-09,2.3608236788195367e-09,1.06875135058649e-09,9.478994425798857e-10,5.714837723603657e-09,1.2732851923399854e-08,3.325387632768114e-09,2.628747868050298e-10,3.002630842323812e-10,2.5295123764301856e-09,2.3761092071325023e-09,1.0335520301317564e-09,3.004905573074636e-11,1.6295361216872276e-09,4.604705640616741e-09,1.0083338269635237e-09,4.315692166827896e-09,2.3819184431678934e-09,2.139633893299091e-09,3.278521945344234e-10,9.0822937648506e-10,3.0672444681926904e-10,1.939989019715839e-10,1.116434284817607e-09,9.346119430598797e-10,1.9058352451894396e-09,5.354917764696292e-09,9.293751802650221e-10,1.239180359607726e-09,6.924539478560659e-09,2.954468044773651e-09,1.0830569047706616e-09,2.7490971237174915e-09,7.744153686813629e-11,2.838627872653282e-09,1.3491514910890656e-09,5.641830811750847e-09,8.764171377128592e-10,2.5301970049898624e-10,1.1617990056640429e-09,3.300154939599859e-09,4.621436669505452e-09,3.619865803557408e-09,3.1324139278519483e-09,3.080501453537224e-09,8.284743838622171e-10,1.1467627630263093e-09,7.523809137239818e-10,3.2208707558237974e-10,1.5109884353370998e-09,1.4840061085184065e-10,7.329294572479998e-10,9.398232984203603e-10,2.5555954657500896e-11,1.340090184866434e-09,7.585776890641105e-11,2.88670181999689e-09,1.0707724618040118e-10,5.478428791553076e-09"
        getter:
          q: "TRACE?"
          r: "{:s}"
        specs:
          type: str


resources:
  ASRL2::INSTR:
    device: power_supply
  USB::0x1111::0x2222::0x2468::INSTR:
    device: power_supply
  TCPIP::localhost:2222::INSTR:
    device: power_supply
  GPIB::9::INSTR:
    device: power_supply
  ASRL3::INSTR:
    device: spectrum_analyzer
  USB::0x1111::0x4444::0xBEEF::INSTR:
    device: spectrum_analyzer
  TCPIP::localhost:1234::INSTR:
    device: spectrum_analyzer
  GPIB::15::INSTR:
    device: spectrum_analyzer